#!/bin/bash\n\necho \"ğŸ§ª Test du Module Messages - Phase 7\"\necho \"====================================\"\n\ncd /Users/kader/Desktop/projet-en-cours/notecibolt-v2\n\necho \"ğŸ“‹ VÃ©rification des fichiers...\"\n\n# Frontend\necho \"âœ… Frontend:\"\nls -la frontend/src/components/Messages/MessageList.tsx 2>/dev/null && echo \"  âœ… MessageList.tsx\" || echo \"  âŒ MessageList.tsx\"\nls -la frontend/src/services/api/messagesService.ts 2>/dev/null && echo \"  âœ… messagesService.ts\" || echo \"  âŒ messagesService.ts\"\n\n# Backend\necho \"âœ… Backend:\"\nls -la backend/src/modules/messages/routes.ts 2>/dev/null && echo \"  âœ… routes.ts\" || echo \"  âŒ routes.ts\"\nls -la backend/src/modules/middleware/auth.ts 2>/dev/null && echo \"  âœ… auth.ts\" || echo \"  âŒ auth.ts\"\n\necho \"\"\necho \"ğŸš€ DÃ©marrage des serveurs...\"\n\n# Fonction pour dÃ©marrer le backend\nstart_backend() {\n    echo \"ğŸ“¡ DÃ©marrage du backend...\"\n    cd backend\n    npm install > /dev/null 2>&1\n    npm run dev &\n    BACKEND_PID=$!\n    cd ..\n    echo \"âœ… Backend dÃ©marrÃ© (PID: $BACKEND_PID)\"\n}\n\n# Fonction pour dÃ©marrer le frontend\nstart_frontend() {\n    echo \"ğŸ¨ DÃ©marrage du frontend...\"\n    cd frontend\n    npm install > /dev/null 2>&1\n    npm run dev &\n    FRONTEND_PID=$!\n    cd ..\n    echo \"âœ… Frontend dÃ©marrÃ© (PID: $FRONTEND_PID)\"\n}\n\n# DÃ©marrer les serveurs\nstart_backend\nsleep 5\nstart_frontend\nsleep 5\n\necho \"\"\necho \"ğŸ§ª Tests de l'API Messages...\"\n\n# Test 1: Health check\necho \"ğŸ“Š Test 1: Health check\"\ncurl -s http://localhost:3001/health > /dev/null\nif [ $? -eq 0 ]; then\n    echo \"  âœ… Backend accessible\"\nelse\n    echo \"  âŒ Backend non accessible\"\nfi\n\n# Test 2: Messages rÃ©cents\necho \"ğŸ“¬ Test 2: Messages rÃ©cents\"\nresponse=$(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:3001/api/v1/messages/recent)\nif [ \"$response\" = \"200\" ]; then\n    echo \"  âœ… API messages/recent: $response\"\nelse\n    echo \"  âŒ API messages/recent: $response\"\nfi\n\n# Test 3: Nombre de messages non lus\necho \"ğŸ“Š Test 3: Messages non lus\"\nresponse=$(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:3001/api/v1/messages/unread-count)\nif [ \"$response\" = \"200\" ]; then\n    echo \"  âœ… API messages/unread-count: $response\"\nelse\n    echo \"  âŒ API messages/unread-count: $response\"\nfi\n\n# Test 4: Contacts\necho \"ğŸ‘¥ Test 4: Contacts\"\nresponse=$(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:3001/api/v1/messages/contacts)\nif [ \"$response\" = \"200\" ]; then\n    echo \"  âœ… API messages/contacts: $response\"\nelse\n    echo \"  âŒ API messages/contacts: $response\"\nfi\n\necho \"\"\necho \"ğŸŒ URLs de test:\"\necho \"  Frontend: http://localhost:5173\"\necho \"  Backend:  http://localhost:3001\"\necho \"  Messages: http://localhost:5173/messages\"\necho \"\"\necho \"ğŸ”‘ Comptes de test:\"\necho \"  Ã‰tudiant: student@notecibolt.com / student123\"\necho \"  Enseignant: teacher@notecibolt.com / teacher123\"\necho \"  Admin: admin@notecibolt.com / admin123\"\necho \"\"\necho \"ğŸ“± FonctionnalitÃ©s Ã  tester:\"\necho \"  âœ… Affichage des messages rÃ©cents\"\necho \"  âœ… Recherche dans les messages\"\necho \"  âœ… Filtrage par type (tous/non lus/annonces)\"\necho \"  âœ… Marquer comme lu (clic sur message)\"\necho \"  âœ… Composer un nouveau message\"\necho \"  âœ… Actualisation des donnÃ©es\"\necho \"  âœ… Fallback automatique si API down\"\necho \"\"\necho \"âš ï¸  Pour arrÃªter les serveurs:\"\necho \"  kill $BACKEND_PID $FRONTEND_PID\"\necho \"\"\necho \"ğŸ¯ Module Messages Phase 7 prÃªt Ã  tester !\"\n